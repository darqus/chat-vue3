# Модульная структура SCSS для чата

Этот документ описывает организацию стилей для чата в модульной архитектуре SCSS.

## Структура папок

```text
src/styles/
├── base/
│   ├── _variables.scss         # Цветовые схемы и базовые переменные
│   ├── _mixins.scss           # Общие миксины
│   └── _reset.scss            # CSS Reset
├── components/
│   ├── _buttons.scss              # Стили кнопок
│   ├── _links.scss                # Стили ссылок
│   ├── _chat.scss                 # Модульный файл чата (с @use/@forward)
│   ├── _chat-mixins.scss          # Миксины и переменные для чата
│   ├── _chat-ui.scss              # Интерфейс чата (формы, панели)
│   └── _chat-interactions.scss    # Интерактивные элементы (реакции, действия)
├── index.scss                 # Точка входа для всех стилей (с @use правилами)
└── chat-standalone.scss       # Автономный файл чата (без зависимостей)
```

## Два подхода к стилизации

### 1. Модульный подход (рекомендуемый для будущего)

Использует современные SCSS правила `@use` и `@forward` для создания модульной системы.

**Файлы:**

- `_chat-mixins.scss` - базовые переменные и миксины
- `_chat-ui.scss` - интерфейс чата
- `_chat-interactions.scss` - интерактивные элементы
- `_chat.scss` - объединяющий файл с @forward

**Проблемы:**

- Конфликты с существующими стилями при использовании @use/@forward
- Циклические зависимости в SCSS
- Сложности с порядком импорта

### 2. Standalone подход (текущий рабочий)

Все стили чата в одном файле без внешних зависимостей.

**Файл:** `chat-standalone.scss`

**Содержит:**

- Переменные чата
- Миксины для сообщений
- Анимации
- Стили сообщений (отправленные/полученные)
- Интерактивные элементы
- Темная тема

**Преимущества:**

- Нет конфликтов с @use правилами
- Простота подключения
- Автономность
- Легкость отладки

Содержит базовые переменные, миксины и анимации для системы чата:

**Переменные:**

- `$chat-primary-color` - основной цвет чата
- `$chat-sent-bg` - фон собственных сообщений
- `$chat-received-bg` - фон чужих сообщений
- `$message-bubble-radius` - радиус сообщений
- `$message-max-width` - максимальная ширина сообщений

**Миксины:**

- `@mixin message-tail($color, $direction)` - хвостики сообщений
- `@mixin message-bubble-base` - базовые стили пузыря сообщения
- `@mixin message-wrapper-base` - обёртка сообщения
- `@mixin hover-actions` - действия при наведении

### 2. `_chat-ui.scss`

Стили для интерфейса чата:

- `.chat-container` - основной контейнер
- `.messages-list-wrapper` - область с сообщениями и кастомный скроллбар
- `.typing-indicator` - индикатор "печатает..."
- `.reply-context-bar` - панель ответа на сообщение
- `.chat-input-form` - форма ввода
- `.chat-dialog` - диалоговые окна

### 3. `_chat-interactions.scss`

Интерактивные элементы:

- `.message-actions` - действия с сообщениями (меню)
- `.message-reactions` - реакции к сообщениям
- `.reactions-menu` - меню выбора реакций
- `.message-reply` - цитируемые сообщения
- `.message--highlighted` - подсвеченные сообщения
- `.message-editing` - режим редактирования

### 4. `_chat.scss`

Главный файл, объединяющий все модули и содержащий основные стили сообщений:

- Импортирует все модули через `@forward`
- Определяет `.message-sent` и `.message-received`
- Содержит общие стили для текста и изображений
- Включает темную тему

## Использование

### В компонентах Vue

```vue
<style scoped>
/* Только специфичные стили компонента */
.component-specific-class {
  /* ... */
}

/* Переопределение глобальных стилей чата */
:deep(.message-bubble) {
  /* кастомизация при необходимости */
}
</style>
```

### В главном приложении

```typescript
// App.vue
import '@/styles/index.scss'
```

### Конфигурация Vite

```typescript
// vite.config.ts
css: {
  preprocessorOptions: {
    scss: {
      additionalData: `
        @use "@/styles/base/variables" as *;
        @use "@/styles/base/mixins" as *;
        @use "@/styles/components/chat-mixins" as chat;
      `,
    },
  },
}
```

## Преимущества модульной архитектуры

1. **Разделение ответственности** - каждый файл отвечает за свою область
2. **Переиспользование** - миксины и переменные доступны везде
3. **Масштабируемость** - легко добавлять новые компоненты
4. **Поддержка** - проще найти и изменить нужные стили
5. **Производительность** - только нужные стили загружаются

## Соглашения об именовании

### Классы

- `.message-*` - стили сообщений
- `.chat-*` - общие стили чата
- `.reply-*` - стили ответов
- `.reaction-*` - стили реакций

### Файлы

- `_название.scss` - частичные файлы SCSS
- `index.scss` - точки входа
- Используется kebab-case для имён файлов

### Переменные и миксины

- `$chat-*` - переменные чата
- `@mixin message-*` - миксины для сообщений
- Используется kebab-case для имён

## Кастомизация темы

Для изменения внешнего вида чата отредактируйте переменные в `_chat-mixins.scss`:

```scss
// Изменение цветовой схемы
$chat-primary-color: #your-color;
$chat-sent-bg: linear-gradient(135deg, #color1, #color2);

// Изменение размеров
$message-bubble-radius: 20px;
$message-max-width: 80%;
```

## Отладка

При проблемах со стилями:

1. Проверьте порядок импорта в `index.scss`
2. Убедитесь, что миксины импортированы в `vite.config.ts`
3. Используйте инструменты разработчика для проверки специфичности CSS
4. Проверьте, что SCSS файлы компилируются без ошибок
